<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM Contactos Pro - Dashboard</title>
    <link rel="stylesheet" href="../styles/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>CRM Contactos Pro</h1>
                <div class="user-info">
                    <span id="userWelcome">Bienvenido, Usuario</span>
                    <button id="themeToggle" class="theme-toggle" title="Alternar tema">üåô</button>
                    <button id="logoutBtn" class="logout-btn">Cerrar Sesi√≥n</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Navigation Tabs -->
            <nav class="nav-tabs">
                <button class="tab-btn active" data-tab="dashboard">üìä Dashboard</button>
                <button class="tab-btn" data-tab="contacts">üë• Contactos</button>
                <button class="tab-btn" data-tab="users">‚öôÔ∏è Usuarios</button>
                <button class="tab-btn" data-tab="tags">üè∑Ô∏è Etiquetas</button>
                <button class="tab-btn" data-tab="reports">üìà Reportes</button>
            </nav>

            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-content active">
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <h3>Total Contactos</h3>
                        <div id="totalContacts" class="stat-number">0</div>
                        <div class="stat-trend">üìà +12% este mes</div>
                    </div>
                    <div class="stat-card">
                        <h3>Leads Activos</h3>
                        <div id="totalLeads" class="stat-number">0</div>
                        <div class="stat-trend">üéØ +8% conversi√≥n</div>
                    </div>
                    <div class="stat-card">
                        <h3>Clientes</h3>
                        <div id="totalClients" class="stat-number">0</div>
                        <div class="stat-trend">üí∞ 85% retenci√≥n</div>
                    </div>
                    <div class="stat-card">
                        <h3>Empresas</h3>
                        <div id="totalCompanies" class="stat-number">0</div>
                        <div class="stat-trend">üè¢ Diversificado</div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-card">
                        <h3>üìä Estado de Contactos</h3>
                        <div class="chart-container">
                            <canvas id="statusChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>üìà Tendencia Mensual</h3>
                        <div class="chart-container">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="activity-section">
                    <div class="section-header">
                        <h3>üïí Actividad Reciente</h3>
                        <button class="view-all-btn">Ver todo</button>
                    </div>
                    <div id="recentActivity" class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon">üë§</div>
                            <div class="activity-content">
                                <p><strong>Ana Garc√≠a</strong> actualizada a cliente</p>
                                <span class="activity-time">Hace 2 horas</span>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üìû</div>
                            <div class="activity-content">
                                <p><strong>Llamada programada</strong> con Carlos Rodr√≠guez</p>
                                <span class="activity-time">Hace 4 horas</span>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">‚úâÔ∏è</div>
                            <div class="activity-content">
                                <p><strong>Email enviado</strong> a Mar√≠a Fern√°ndez</p>
                                <span class="activity-time">Ayer</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contacts Tab -->
            <div id="contacts-tab" class="tab-content">
                <div class="contacts-section">
                    <div class="section-header">
                        <h2>Gesti√≥n de Contactos</h2>
                        <div class="header-actions">
                            <button id="addContactBtn" class="add-btn">+ Nuevo Contacto</button>
                        </div>
                    </div>

                    <!-- Search and Filters -->
                    <div class="search-filters-section">
                        <div class="search-container">
                            <div class="search-input-group">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" id="contactsSearch" placeholder="Buscar contactos..." class="search-input">
                            </div>
                        </div>
                        
                        <div class="view-options">
                            <button id="listView" class="view-toggle active" data-view="list">
                                <i class="fas fa-list"></i>
                                Lista
                            </button>
                            <button id="cardView" class="view-toggle" data-view="card">
                                <i class="fas fa-th-large"></i>
                                Tarjetas
                            </button>
                            <button id="gridView" class="view-toggle" data-view="grid">
                                <i class="fas fa-th"></i>
                                Cuadr√≠cula
                            </button>
                        </div>
                    </div>

                    <div id="contactsContainer" class="contacts-table-container">
                        <table id="contactsTable" class="contacts-table resizable-table">
                            <thead>
                                <tr>
                                    <th class="resizable-column" data-min-width="150">
                                        <span>Nombre completo</span>
                                        <div class="column-resizer"></div>
                                    </th>
                                    <th class="resizable-column" data-min-width="80">
                                        <span>Avatar</span>
                                        <div class="column-resizer"></div>
                                    </th>
                                    <th class="resizable-column" data-min-width="180">
                                        <span>Email</span>
                                        <div class="column-resizer"></div>
                                    </th>
                                    <th class="resizable-column" data-min-width="120">
                                        <span>Tel√©fono</span>
                                        <div class="column-resizer"></div>
                                    </th>
                                    <th class="resizable-column" data-min-width="140">
                                        <span>Pa√≠s</span>
                                        <div class="column-resizer"></div>
                                    </th>
                                    <th class="resizable-column" data-min-width="120">
                                        <span>Etiquetas</span>
                                        <div class="column-resizer"></div>
                                    </th>
                                    <th class="resizable-column" data-min-width="150">
                                        <span>Comentarios</span>
                                        <div class="column-resizer"></div>
                                    </th>
                                    <th data-min-width="100">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="contactsTableBody">
                                <!-- Se cargar√° din√°micamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Users Tab -->
            <div id="users-tab" class="tab-content">
                <div class="users-section">
                    <div class="section-header">
                        <h2>Administraci√≥n de Usuarios</h2>
                        <button id="addUserBtn" class="add-btn">+ Agregar Usuario</button>
                    </div>

                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <h3>Total de Usuarios</h3>
                            <div id="totalUsers" class="stat-number">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Administradores</h3>
                            <div id="totalAdmins" class="stat-number">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Usuarios Regulares</h3>
                            <div id="totalRegularUsers" class="stat-number">0</div>
                        </div>
                    </div>

                    <!-- Search and Filters -->
                    <div class="search-filters-section">
                        <div class="search-container">
                            <div class="search-input-group">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" id="usersSearch" placeholder="Buscar por nombre, email..." class="search-input">
                            </div>
                        </div>
                        
                        <div class="filters-container">
                            <div class="filter-group">
                                <select id="roleFilter" class="filter-select">
                                    <option value="">Todos los roles</option>
                                    <option value="admin">Administradores</option>
                                    <option value="user">Usuarios</option>
                                </select>
                                <i class="fas fa-chevron-down filter-icon"></i>
                            </div>
                            
                            <div class="filter-group">
                                <select id="genderFilter" class="filter-select">
                                    <option value="">Todos los g√©neros</option>
                                    <option value="masculino">Masculino</option>
                                    <option value="femenino">Femenino</option>
                                    <option value="otro">Otro</option>
                                    <option value="no_especifica">No especifica</option>
                                </select>
                                <i class="fas fa-chevron-down filter-icon"></i>
                            </div>
                        </div>
                        
                        <div class="view-options">
                            <button id="userListView" class="view-toggle active" data-view="list">
                                <i class="fas fa-list"></i>
                                Lista
                            </button>
                            <button id="userCardView" class="view-toggle" data-view="card">
                                <i class="fas fa-th-large"></i>
                                Tarjetas
                            </button>
                            <button id="userGridView" class="view-toggle" data-view="grid">
                                <i class="fas fa-th"></i>
                                Cuadr√≠cula
                            </button>
                        </div>
                    </div>

                    <div id="usersContainer" class="users-table-container">
                        <table id="usersTable" class="users-table">
                            <thead>
                                <tr>
                                    <th>Avatar</th>
                                    <th>Nombre</th>
                                    <th>Email</th>
                                    <th>G√©nero</th>
                                    <th>Rol</th>
                                    <th>Fecha de Registro</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- Los usuarios se cargar√°n din√°micamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tags Tab -->
            <div id="tags-tab" class="tab-content">
                <div class="tags-section">
                    <div class="section-header">
                        <h2>üè∑Ô∏è Gesti√≥n de Etiquetas</h2>
                        <button id="addTagBtn" class="add-btn">+ Nueva Etiqueta</button>
                    </div>

                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <h3>Total Etiquetas</h3>
                            <div id="totalTags" class="stat-number">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Etiquetas en Uso</h3>
                            <div id="tagsInUse" class="stat-number">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Etiquetas por Usuario</h3>
                            <div id="userTags" class="stat-number">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Etiquetas por Contacto</h3>
                            <div id="contactTagsCount" class="stat-number">0</div>
                        </div>
                    </div>

                    <!-- Search and Filters -->
                    <div class="search-filters-section">
                        <div class="search-container">
                            <div class="search-input-group">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" id="tagsSearch" placeholder="Buscar etiquetas..." class="search-input">
                            </div>
                        </div>
                        
                        <div class="view-options">
                            <button id="tagListView" class="view-toggle active" data-view="list">
                                <i class="fas fa-list"></i>
                                Lista
                            </button>
                            <button id="tagCardView" class="view-toggle" data-view="card">
                                <i class="fas fa-th-large"></i>
                                Tarjetas
                            </button>
                            <button id="tagGridView" class="view-toggle" data-view="grid">
                                <i class="fas fa-th"></i>
                                Cuadr√≠cula
                            </button>
                        </div>
                        
                        <div class="filters-container">
                            <div class="filter-group">
                                <select id="tagTypeFilter" class="filter-select">
                                    <option value="">Todos los tipos</option>
                                    <option value="status">Estado</option>
                                    <option value="priority">Prioridad</option>
                                    <option value="category">Categor√≠a</option>
                                    <option value="role">Rol</option>
                                    <option value="custom">Personalizada</option>
                                </select>
                                <i class="fas fa-chevron-down filter-icon"></i>
                            </div>
                            
                            <div class="filter-group">
                                <select id="tagUsageFilter" class="filter-select">
                                    <option value="">Todos los usos</option>
                                    <option value="users">Para Usuarios</option>
                                    <option value="contacts">Para Contactos</option>
                                    <option value="both">Ambos</option>
                                </select>
                                <i class="fas fa-chevron-down filter-icon"></i>
                            </div>
                        </div>
                    </div>

                    <div id="tagsContainer" class="tags-table-container">
                        <table id="tagsTable" class="tags-table">
                            <thead>
                                <tr>
                                    <th>Color</th>
                                    <th>Nombre</th>
                                    <th>Tipo</th>
                                    <th>Uso</th>
                                    <th>Descripci√≥n</th>
                                    <th>Creada por</th>
                                    <th>Fecha</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tagsTableBody">
                                <!-- Las etiquetas se cargar√°n din√°micamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports-tab" class="tab-content">
                <div class="reports-section">
                    <div class="section-header">
                        <h2>üìä Centro de Reportes</h2>
                    </div>
                    
                    <div class="reports-grid">
                        <div class="report-card">
                            <div class="report-icon">üìÑ</div>
                            <h3>Exportar Contactos</h3>
                            <p>Exporta todos los contactos a CSV con filtros personalizados</p>
                            <button id="exportContactsBtn" class="export-btn">Descargar CSV</button>
                        </div>
                        <div class="report-card">
                            <div class="report-icon">üìà</div>
                            <h3>Reporte de Conversi√≥n</h3>
                            <p>An√°lisis detallado de la conversi√≥n de leads a clientes</p>
                            <button id="conversionReportBtn" class="export-btn">Generar Reporte</button>
                        </div>
                        <div class="report-card">
                            <div class="report-icon">üìä</div>
                            <h3>Dashboard Ejecutivo</h3>
                            <p>M√©tricas clave del negocio y KPIs principales</p>
                            <button id="executiveReportBtn" class="export-btn">Ver Dashboard</button>
                        </div>
                        <div class="report-card">
                            <div class="report-icon">üéØ</div>
                            <h3>An√°lisis de Pipeline</h3>
                            <p>Estado del pipeline de ventas y proyecciones</p>
                            <button id="pipelineReportBtn" class="export-btn">Analizar Pipeline</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Simplified Modal para Agregar/Editar Contacto -->
    <div id="contactModal" class="modal">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <div class="modal-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="modal-title-section">
                            <h2 id="contactModalTitle">Agregar Contacto</h2>
                            <p class="modal-subtitle">Completa la informaci√≥n b√°sica del contacto</p>
                        </div>
                    </div>
                    <button class="modal-close-btn" onclick="closeContactModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="modal-body">
                    <form id="contactForm" class="modern-form">
                        <input type="hidden" id="contactId" name="id">
                        
                        <!-- Avatar Section -->
                        <div class="avatar-section">
                            <div class="avatar-upload-container">
                                <div class="avatar-preview" id="contactAvatarPreview">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23cccccc'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E" alt="Avatar" id="contactAvatarImage">
                                    <div class="avatar-overlay">
                                        <i class="fas fa-camera"></i>
                                    </div>
                                </div>
                                <input type="file" id="contactAvatarInput" accept="image/*" style="display: none;">
                                <label for="contactAvatarInput" class="avatar-upload-label">Cambiar avatar</label>
                            </div>
                        </div>
                        
                        <!-- Essential Information -->
                        <div class="form-section">
                            <div class="form-grid">
                                <div class="input-group full-width">
                                    <input type="text" id="contactName" name="name" required>
                                    <label for="contactName">Nombre completo *</label>
                                    <span class="input-highlight"></span>
                                </div>
                                
                                <div class="input-group">
                                    <input type="email" id="contactEmail" name="email">
                                    <label for="contactEmail">Email</label>
                                    <span class="input-highlight"></span>
                                </div>
                                
                                <div class="input-group">
                                    <input type="tel" id="contactPhone" name="phone">
                                    <label for="contactPhone">Tel√©fono</label>
                                    <span class="input-highlight"></span>
                                </div>
                                
                                <div class="select-group">
                                    <select id="contactCountry" name="country">
                                        <option value="">Selecciona pa√≠s</option>
                                        <option value="ES">üá™üá∏ Espa√±a</option>
                                        <option value="US">üá∫üá∏ Estados Unidos</option>
                                        <option value="MX">üá≤üáΩ M√©xico</option>
                                        <option value="AR">üá¶üá∑ Argentina</option>
                                        <option value="CO">üá®üá¥ Colombia</option>
                                        <option value="PE">üáµüá™ Per√∫</option>
                                        <option value="VE">üáªüá™ Venezuela</option>
                                        <option value="CL">üá®üá± Chile</option>
                                        <option value="EC">üá™üá® Ecuador</option>
                                        <option value="UY">üá∫üáæ Uruguay</option>
                                        <option value="PY">üáµüáæ Paraguay</option>
                                        <option value="BO">üáßüá¥ Bolivia</option>
                                        <option value="CR">üá®üá∑ Costa Rica</option>
                                        <option value="PA">üáµüá¶ Panam√°</option>
                                        <option value="GT">üá¨üáπ Guatemala</option>
                                        <option value="HN">üá≠üá≥ Honduras</option>
                                        <option value="NI">üá≥üáÆ Nicaragua</option>
                                        <option value="SV">üá∏üáª El Salvador</option>
                                        <option value="DO">üá©üá¥ Rep√∫blica Dominicana</option>
                                        <option value="CU">üá®üá∫ Cuba</option>
                                        <option value="FR">üá´üá∑ Francia</option>
                                        <option value="DE">üá©üá™ Alemania</option>
                                        <option value="IT">üáÆüáπ Italia</option>
                                        <option value="PT">üáµüáπ Portugal</option>
                                        <option value="GB">üá¨üáß Reino Unido</option>
                                        <option value="BR">üáßüá∑ Brasil</option>
                                    </select>
                                    <label for="contactCountry">Pa√≠s</label>
                                    <i class="fas fa-chevron-down select-icon"></i>
                                </div>
                                
                                <div class="select-group full-width">
                                    <select id="contactTags" name="tags" multiple>
                                        <!-- Se cargar√°n din√°micamente las etiquetas -->
                                    </select>
                                    <label for="contactTags">Etiquetas</label>
                                    <i class="fas fa-chevron-down select-icon"></i>
                                </div>
                                
                                <div class="textarea-group full-width">
                                    <textarea id="contactComments" name="comments" rows="3"></textarea>
                                    <label for="contactComments">Comentarios</label>
                                    <span class="input-highlight"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div id="contact-form-error" class="error-message" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span class="error-text"></span>
                        </div>
                    </form>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeContactModal()">
                        <i class="fas fa-times"></i>
                        <span>Cancelar</span>
                    </button>
                    <button type="submit" form="contactForm" class="btn-primary">
                        <i class="fas fa-save"></i>
                        <span>Guardar Contacto</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Agregar/Editar Etiqueta -->
    <div id="tagModal" class="modal">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <div class="modal-icon">
                            <i class="fas fa-tag"></i>
                        </div>
                        <div class="modal-title-section">
                            <h2 id="tagModalTitle">Nueva Etiqueta</h2>
                            <p class="modal-subtitle">Crea una nueva etiqueta para organizar usuarios y contactos</p>
                        </div>
                    </div>
                    <button class="modal-close-btn" onclick="closeTagModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="modal-body">
                    <form id="tagForm" class="modern-form">
                        <input type="hidden" id="tagId" name="id">
                        
                        <div class="form-section">
                            <div class="form-grid">
                                <div class="input-group full-width">
                                    <input type="text" id="tagName" name="name" required>
                                    <label for="tagName">Nombre de la etiqueta *</label>
                                    <span class="input-highlight"></span>
                                </div>
                                
                                <div class="input-group">
                                    <input type="color" id="tagColor" name="color" value="#4FACFE">
                                    <label for="tagColor">Color</label>
                                </div>
                                
                                <div class="select-group">
                                    <select id="tagType" name="type" required>
                                        <option value="">Selecciona un tipo</option>
                                        <option value="status">Estado</option>
                                        <option value="priority">Prioridad</option>
                                        <option value="category">Categor√≠a</option>
                                        <option value="role">Rol</option>
                                        <option value="custom">Personalizada</option>
                                    </select>
                                    <label for="tagType">Tipo de etiqueta *</label>
                                    <i class="fas fa-chevron-down select-icon"></i>
                                </div>
                                
                                <div class="select-group">
                                    <select id="tagUsage" name="usage" required>
                                        <option value="">Selecciona el uso</option>
                                        <option value="users">Solo Usuarios</option>
                                        <option value="contacts">Solo Contactos</option>
                                        <option value="both">Ambos</option>
                                    </select>
                                    <label for="tagUsage">Uso de la etiqueta *</label>
                                    <i class="fas fa-chevron-down select-icon"></i>
                                </div>
                                
                                <div class="textarea-group full-width">
                                    <textarea id="tagDescription" name="description" rows="3"></textarea>
                                    <label for="tagDescription">Descripci√≥n (opcional)</label>
                                    <span class="input-highlight"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tag-preview">
                            <h4>Vista previa:</h4>
                            <span id="tagPreview" class="tag-sample">Etiqueta de ejemplo</span>
                        </div>
                        
                        <div id="tag-form-error" class="error-message" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span class="error-text"></span>
                        </div>
                    </form>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeTagModal()">
                        <i class="fas fa-times"></i>
                        <span>Cancelar</span>
                    </button>
                    <button type="submit" form="tagForm" class="btn-primary">
                        <i class="fas fa-save"></i>
                        <span>Guardar Etiqueta</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Modal para Agregar/Editar Usuario -->
    <div id="userModal" class="modal">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <div class="modal-icon">
                            <i class="fas fa-user-cog"></i>
                        </div>
                        <div class="modal-title-section">
                            <h2 id="modalTitle">Agregar Usuario</h2>
                            <p class="modal-subtitle">Gestiona los usuarios del sistema</p>
                        </div>
                    </div>
                    <button class="modal-close-btn" onclick="closeUserModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="modal-body">
                    <form id="userForm" class="modern-form">
                        <input type="hidden" id="userId" name="id">
                        
                        <div class="form-section">
                            <!-- Avatar Section -->
                            <div class="avatar-section">
                                <div class="avatar-preview">
                                    <img id="avatarPreview" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'%3E%3C/path%3E%3C/svg%3E" alt="Avatar Preview" class="avatar-img">
                                    <div class="avatar-upload-btn">
                                        <i class="fas fa-camera"></i>
                                    </div>
                                    <input type="file" id="avatarInput" name="avatar" accept="image/*" class="avatar-file-input">
                                </div>
                                <p class="avatar-hint">Haz clic para cambiar avatar (opcional)</p>
                            </div>
                            
                            <div class="form-grid">
                                <div class="input-group">
                                    <input type="text" id="userName" name="name" required>
                                    <label for="userName">Nombre completo</label>
                                    <span class="input-highlight"></span>
                                </div>
                                
                                <div class="input-group">
                                    <input type="email" id="userEmail" name="email" required>
                                    <label for="userEmail">Email</label>
                                    <span class="input-highlight"></span>
                                </div>
                                
                                <div class="select-group">
                                    <select id="userGender" name="gender">
                                        <option value="">Selecciona g√©nero</option>
                                        <option value="masculino">Masculino</option>
                                        <option value="femenino">Femenino</option>
                                        <option value="otro">Otro</option>
                                        <option value="no_especifica">Prefiero no especificar</option>
                                    </select>
                                    <label for="userGender">G√©nero</label>
                                    <i class="fas fa-chevron-down select-icon"></i>
                                </div>
                                
                                <div class="input-group" id="passwordGroup">
                                    <input type="password" id="userPassword" name="password" minlength="6">
                                    <label for="userPassword">Contrase√±a</label>
                                    <span class="input-highlight"></span>
                                </div>
                                
                                <div class="select-group">
                                    <select id="userRole" name="role" required>
                                        <option value="">Selecciona un rol</option>
                                        <option value="user">Usuario</option>
                                        <option value="admin">Administrador</option>
                                    </select>
                                    <label for="userRole">Rol</label>
                                    <i class="fas fa-chevron-down select-icon"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div id="user-form-error" class="error-message" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span class="error-text"></span>
                        </div>
                    </form>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeUserModal()">
                        <i class="fas fa-times"></i>
                        <span>Cancelar</span>
                    </button>
                    <button type="submit" form="userForm" class="btn-primary">
                        <i class="fas fa-save"></i>
                        <span>Guardar Usuario</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Modal de Confirmaci√≥n de Eliminaci√≥n -->
    <div id="deleteModal" class="modal">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-content modal-delete">
                <div class="modal-header modal-header-danger">
                    <div class="modal-header-content">
                        <div class="modal-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="modal-title-section">
                            <h2>Confirmar Eliminaci√≥n</h2>
                            <p class="modal-subtitle">Esta acci√≥n no se puede deshacer</p>
                        </div>
                    </div>
                    <button class="modal-close-btn" onclick="closeDeleteModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="modal-body">
                    <div class="delete-warning">
                        <div class="warning-icon">
                            <i class="fas fa-trash-alt"></i>
                        </div>
                        <div class="warning-content">
                            <p id="deleteMessage">¬øEst√°s seguro de que deseas eliminar este elemento?</p>
                            <div id="deleteInfo" class="delete-info"></div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeDeleteModal()">
                        <i class="fas fa-times"></i>
                        <span>Cancelar</span>
                    </button>
                    <button type="button" id="confirmDeleteBtn" class="btn-danger">
                        <i class="fas fa-trash-alt"></i>
                        <span>Eliminar</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="spinner-large"></div>
        <p>Cargando...</p>
    </div>

    <script src="../scripts/dashboard.js"></script>
</body>
</html>
